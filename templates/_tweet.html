<article class="post relative" mix-fade-in="5000" id="post_{{ tweet.post_pk }}">
    <img src="{{ url_for('static', filename='images/'~(tweet.user_avatar_path if tweet.user_avatar_path else 'unknown.jpg')) }}"
        alt="Profile Picture" class="w-8 h-8 rounded-full">
    <div class="post-content">
        <div class="post-header">
            <div>
                <span class="name">
                    {{ tweet.user_first_name }}
                    {{ tweet.user_last_name }}
                </span>
                <span class="handle">@{{ tweet.user_username }}</span> Â·
                <span class="time">
                    {% if tweet.post_created_at %}
                    {{ tweet.post_created_at.strftime('%b %d, %Y at %I:%M %p') }}
                    {% else %}
                    Recently
                    {% endif %}
                </span>
            </div>
        </div>

        <div class="text" id="post_text_{{ tweet.post_pk }}">
            {{ tweet.post_message }}
        </div>

        {% if tweet.post_image_path %}
        <img src="{{ url_for('static', filename='images/' ~ tweet.post_image_path) }}" alt="Post image"
            id="post_image_{{ tweet.post_pk }}" class="w-80">
        {% endif %}

        <div class="post-actions">
            <span class="action"><i class="fa-regular fa-comment"></i> 12</span>
            <span class="action"><i class="fa-solid fa-retweet"></i> 5</span>
            {% include "___button_like_tweet.html" %}
            <span class="action"><i class="fa-solid fa-chart-simple"></i> 230</span>
            <span class="action"><i class="fa-solid fa-share"></i></span>

            <!-- Edit + Delete - only show if user owns the post -->
            {% if user and user.user_pk == tweet.post_user_fk %}

            <span class="action"
                onclick="openEditModal('{{ tweet.post_pk }}', `{{ tweet.post_message|replace('`', '\\`') }}`, '{{ tweet.post_image_path or '' }}')"
                title="Edit post">
                <i class="fa-solid fa-pen-to-square text-blue-600"></i>
            </span>

            <span class="action" onclick="deletePost('{{ tweet.post_pk }}')" title="Delete post">
                <i class="fa-solid fa-trash text-red-600"></i>
            </span>

            {% endif %}
        </div>
    </div>
</article>